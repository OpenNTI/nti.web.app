@mixin input-box-style{
	input[type=text] {
		display: inline-block;
		height: 36px;
		font: normal normal 14px/20px $font;
		color: $secondary-grey;
		background: #fff;
		padding: 0 12px;
		border: 1px solid #dcdcdc;
		margin: 5px;
		width: 410px;

		&.invalid {
			&,&[data-required="true"]{
				border-left-width: 0;
				box-shadow: inset 5px 0 0 0 $primary-red;
			}
		}

		&.valid {
			&,&[data-required="true"]{
				border-left-width: 0;
				box-shadow: inset 5px 0 0 0 $primary-green;
			}
		}

		&[data-width="2/3"]{ width: 260px; }
		&[data-width="1/2"]{ width: 200px; }
		&[data-width="1/3"]{ width: 140px; }
		&[data-width="1/4"]{ width: 95px; }
		&[data-width="1/8"]{ width: 45px; }

		&[data-required="true"]{
			border-left-width: 0;
			box-shadow: inset 5px 0 0 0 #a0a0a0;
		}
	}
}

.purchase-window {
	@extend .nti-window;
	@include reset-window-border-radius(3px);
	box-shadow: 0 0 50px 5px rgba(0, 0, 0, 0.3),
				0 0 0 110px transparent;


	background: #f8f8f8;

	.header {
		.titlebar {
			position: relative;
			color: $tertiary-grey;
			border-bottom: 1px solid #BFBFBF;
			box-shadow: inset 0 1px 0 0 white;

			&.started {
				&::after{
					content: '';
					position: absolute;
					bottom: -8px;
					left: 0;
					right: 0;
					height: 8px;
					box-shadow: 0 -3px 8px -3px rgba(0, 0, 0, 0.25);
					border-radius: 90px;
				}


				.close { display: none; }
				.tab[data-order] { display: inline-block; }
			}

			.close {
				cursor: pointer;
				position: absolute;
				top: 10px; right: 10px;
				opacity: 0.6;
				background: $icons no-repeat;
				@include sprite($icons,'window-control-close',$dimensions: true);

				&:hover {
					opacity: 1;
				}
			}

			.tab {
				position: relative;
				cursor: pointer;
				padding: 0 15px;
				display: inline-block;
				font: normal 700 10px/36px $font;
				text-transform: uppercase;
				white-space: nowrap;

				&[data-order]{
					display: none;
					padding-left: 35px;
					&::after{
						content: attr(data-order);
						position: absolute;
						top: 0px;
						left: 17px;
					}
					&::before {
						content: '';
						position: absolute;
						border: 2px solid $tertiary-grey;
						border-radius: 10px;
						display: block;
						line-height: normal;
						top: 9px;
						left: 11px;
						width: 14px;
						height: 14px;
					}

					&.active {
						background: #fff;
						border: 0 solid #e2e2e2;
						border-width: 0 1px 0;
					}
				}


				&:first-of-type.visited,
				&.visited {
					color: $secondary-grey;
					&::before {
						border-color: $secondary-grey;
					}
					&[data-order]::after {
						content: '';
						top: 14px; left: 15px;
						background: $icons no-repeat;
						@include sprite($icons,'check_progress',$dimensions: true);
						&.active {
							@include sprite($icons,'check_progress_grn',$dimensions: true);
						}
					}
				}

				&.active {
					color: $primary-green;
					&::before {
						border-color: #8eb737;
					}
				}

                &.locked {
                    cursor: default;
                }
			}
		}

		.columns{
			display: none;
			height: 45px;
			padding: 0 18px;
			background: #fff;
			box-shadow: inset 0 -1px 0 0 #e6e6e6;

			div {
				display: inline-block;
				font: normal 600 10px/15px $font;
				text-transform: uppercase;
				color: $tertiary-grey;
				padding-top: 25px;

				&.b {
					margin: 0 30px 0 300px;
				}
			}
		}

		.info {
			padding: 18px;
			background: #f7fcff;
			overflow: hidden;
			box-shadow: inset 0 -1px 0 0 #e6e6e6;

			.bookcover {
				background:{
					color: #f9f9f9;
					size: cover;
					position: center center;
					repeat: no-repeat;
				}
				box-shadow: -1px 1px 3px 0 rgba(0,0,0,0.35);
				border-radius: 1px;
				float: left;
				width: 55px;
				height: 70px;
			}

			.meta {
				margin-left: 70px;
				margin-right: 100px;
				min-height: 70px;

				.title, .byline {
					color: $primary-grey;
					font: normal 600 14px/20px $font;
					text-overflow: ellipsis;
					overflow: hidden;
					//white-space: nowrap;
				}

				.byline {
					color: #ababab;
					font-size: 10px;
					line-height: 15px;
					white-space: nowrap;
					text-transform: uppercase;
				}

				.activation-code {
					display: none;
					@include input-box-style;
					input[type=text] {
						margin: 15px 0 0 0;
						width: 200px;
					}
				}
			}

			.quantity, .price {
				float: right;
				white-space: nowrap;
				color: $primary-grey;
				font: normal 600 16px/30px $font;
				min-width: 75px;
				text-align: center;
				margin: 2px 8px 0 0;
			}

			.quantity {
				display: none;
			}

			.price {
				color: #fff;
				position: relative;
				z-index: 1;

				&::before {
					content: '';
					background: $primary-green;
					position: absolute;
					top: 0; bottom: 0;
					left: -5px; right: -5px;
					border-radius: 3px;
					z-index: -1;
				}
			}
		}

		&.show-activation-code {
			.info .meta .activation-code{
				display: block;
			}
		}


		&.show-columns{
			.columns { display: block; }
			.info {
				.meta {
					margin-right: 175px;
				}
				.quantity {
					display: block;
				}
			}
		}

		&.final-price{
			.price{
				color: $primary-grey;
				&::before {
					display: none;
				}
			}
		}
	}

	.error {
		position: absolute;
		bottom: 45px; left: 0; right: 0;
		overflow: hidden;
		background: #f35252;
		font: normal 600 12px $font;

		.label {
			float: left;
			width: 75px;
			text-align: right;
			color: #730000;
			padding: 10px 0;
		}

		.message {
			color: #fff;
			margin: 10px 10px 10px 85px;
		}
	}

	.footer {
		position: absolute;
		bottom: 0;
		left: 0; right: 0;

		border: 0 solid #dcdcdc;
		border-top-width: 1px;
		text-align: right;
		border-radius: 0 0 3px 3px;

		&::after{
			content: '';
			position: absolute;
			top: -8px;
			left: 0;
			right: 0;
			height: 8px;
			box-shadow: 0 3px 8px -3px rgba(0, 0, 0, 0.25);
			border-radius: 90px;
		}

		label {
			position: absolute;
			left: 0; top: 0;
			height: 45px;
			display: none;
			text-align: left;
			color: $secondary-grey;
			font: normal normal 11px/45px $font;

			&.active {
				display: block;
			}

			a:link, a:visited, a:active {
				color: $primary-blue;
				text-decoration: none;
			}

			input[type=checkbox]{
				position:absolute;
				clip: rect(0,0,0,0);
				clip: rect(0 0 0 0);

				& + div{
					position: relative;
					padding-left: 35px;

					&::before {
						position: absolute;
						content: '';
						background: $icons no-repeat;
						top: 16px; left: 15px;
						@include sprite($icons,'checkbox-14',$dimensions: true);
					}

					&:hover::before {
						@include sprite($icons,'checkbox-14_hover',$dimensions: true);
					}
				}

				&:checked + div {
					&, &:hover {
						&::before {
							@include sprite($icons,'checkbox-14_active',$dimensions: true);
						}
					}
				}
			}

            & a.activation {

                .desc{
					box-shadow: 3px 3px 3px 0 rgba(0,0,0,0.1);
                    background-color: #fcfcfc;
					border: 1px solid $border-grey;
					border-radius: 5px;

                    display: none;
                    top: -75px;
                    left: 15px;
                    position: absolute;
                    opacity: 1;
                    width: 330px;
                    line-height: normal;
                    line-height: 2em;
                    white-space: normal;
                    font-size: 14px;
                    font-style: normal;
                    color: #757474;
                    padding: 10px 30px;
                    z-index: 100000;

					&::after{
						content: "";
						position: absolute;
						z-index: 1;
						bottom: -14px;
						left: 25%;
						background: $elements no-repeat;
						@include sprite($elements,'window-nib-south',$dimensions: true);
					}

					&.shown{ display: block; }
                }

                &:hover .desc{
                    display: block;
                }
            }
		}

		a.button {
			cursor: pointer;
			display: inline-block;
			height: 45px;
			width: 85px;
			line-height: 45px;
			font-size: 14px;
			text-align: center;
			color: $secondary-grey;
			margin: -1px;

			&.confirm {
				width: 95px;
				line-height: 44px;
				font-weight: 500;
				font-style: italic;
				color: #ffffff;
				outline: 1px solid #69a92b;
				background: #75bc30;

				&.alt {
					background: $primary-blue;
					outline: 1px solid $border-blue;
				}

				&.disabled {
					opacity: 0.6;
					background: #dcdcdc;
					outline: none;
				}
			}
		}

	}

	.container-body {
		background: #fff;
		overflow: {
			x: hidden;
			y: auto;
		}

		font: normal 400 14px/25px $font;
	}
}


.x-component-detailview-panel{
    padding: 45px 20px;
    white-space: pre-wrap;
}

.x-component-purchaseconfirm-panel,
.x-component-purchase-form {
	padding-left: 80px;
	padding-right: 15px;

	color: $secondary-grey;

	a {
		display: block;
		margin: 10px 0;
		text-decoration: none;

		&,&:link,&:active,&:visited{
			color: $primary-blue;
		}
	}

	div.message {
		margin-top: 10px;
	}

	.coupon {
		text-transform: uppercase;
		font: normal 600 10px/20px $font;
		color: $primary-green;
		display: block;
		margin-top: 10px;
	}

	fieldset {
		border: none;
		border-width: 0;
		margin: 30px 0 0 0;
		padding: 15px 0 0 0;

		&.smaller-margin{
			margin-top: 20px;
			input{
				margin: 0 5px;
			}
		}

		&.div {
			margin-top: 20px;
			padding-bottom: 20px;
			box-shadow: inset 0 -1px 0 0 #e6e6e6;
		}
	}

	legend {
		color: $secondary-grey;
		font: normal 700 14px/20px $font;

		&.card, &.location {
			position: relative;
			&::before {
				position: absolute;
				top: 2px;
				left: -35px;

				content: '';
				background: $icons no-repeat;
				@include sprite($icons,'credit_card',$dimensions: true);
			}
		}

		&.location::before {
			top: 0;
			left: -25px;
			@include sprite($icons,'location_pin',$dimensions: true);
		}
	}

	label {
		display: block;
		font: normal normal 14px/30px $font;

		input[type=text]{
			margin:5px 10px 0 0;
			font-weight: bold;
			padding: 0 2px;
			text-align: center;
		}

		input[type=checkbox],
		input[type=radio]{
			position:absolute;
			clip: rect(0,0,0,0);
			clip: rect(0 0 0 0);

			& + div{
				position: relative;
				padding-left: 25px;

				&::before {
					position: absolute;
					content: '';
					background: $icons no-repeat;
					top: 7px; left: 0;
					@include sprite($icons,'radio-button-16',$dimensions: true);
				}

				&:hover::before {
					@include sprite($icons,'radio-button-16_hover',$dimensions: true);
				}
			}

			&:checked + div {
				&:hover, & {
					&::before{
						@include sprite($icons,'radio-button-16_active',$dimensions: true);
					}
				}
			}
		}
	}


	@include input-box-style;

	legend + div:first-of-type [data-label]{
		margin-top: 20px;
	}

	[data-label]{
		white-space: pre-wrap;
		position: relative;
		display: inline-block;
		min-width: 60px;
		margin: 35px 40px 0 0;
		font: normal normal 14px/20px $font;
		color: $primary-grey;

		&:empty{display: none;}

		&::before{
			color: #a0a0a0;
			content: attr(data-label) ":";
			position: absolute;
			top: -16px;
			left: 0;
			white-space: nowrap;
			font-size: 10px;
			text-transform: uppercase;
			font-weight: bold;
		}
	}
}

.x-component-purchaseconfirm-panel fieldset {
	padding-top: 1px;
}


.x-component-purchasecomplete-panel {
	padding: 0 15px 20px 80px;
	font: normal 400 14/25px $font;
	color: $secondary-grey;

	.gap {
		margin-top: 30px;
	}

	a {
		display: block;
		margin: 10px 0;
		text-decoration: none;

		&,&:link,&:active,&:visited{
			color: $primary-blue;
		}
	}

	h3 {
		margin: 0;
		color: $primary-grey;
		font: normal 400 21px/30px $font;
	}

	[data-label]{
		cursor: text;
		top: 30px;
		white-space: pre-wrap;
		position: relative;
		display: inline-block;
		min-width: 250px;
		font: normal 600 14px/30px $font;
		color: $secondary-grey;
		background: #eeeeee;
		border-radius: 3px;
		padding: 1px 10px;

		&::before{
			color: $tertiary-grey;
			content: attr(data-label) ":";
			position: absolute;
			top: -30px;
			left: 10px;
			white-space: nowrap;
			font-size: 10px;
			text-transform: uppercase;
			font-weight: 500;
		}
	}
}
